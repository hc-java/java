整合所学SpringBoot的基础



# 智能蔬菜大棚控制系统

## 提前做好的操作



### 修改maven:

![1576632744673](C:\Users\HC\AppData\Roaming\Typora\typora-user-images\1576632744673.png)

### 修改编码方式：

![1576635552845](C:\Users\HC\AppData\Roaming\Typora\typora-user-images\1576635552845.png)



###　mysql加版本号

~~~ xml
     <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.41</version>
            <scope>runtime</scope>
        </dependency>
~~~



### 让html即时刷新

参考：html即时生效.md

### yml转application格式

<https://www.toyaml.com/index.html>



# 开发过程中出现的各种错误

## Q1

  error:  'tomcatServletWebServerFactory' defined in class path resource

~~~yml
#运行项目时要会加上项目名称
server:
  servlet:
    context-path: /znsc  #项目名称前要加/
~~~



## Q2

问题：加了拦截器后，静态资源无法引用

解决办法：在excludePathPatterns中添加 .css .js

~~~java
  //注册拦截器
            @Override
            public void addInterceptors(InterceptorRegistry registry) {
                //super.addInterceptors(registry);
                //springboot已经做好了静态资源的映射
                registry.addInterceptor(new LoginHandlerInterceptor()).addPathPatterns("/**")
                        .excludePathPatterns("/","/index","/index.html","/login","/**/*.css", "/**/*.js");
            }
~~~

## Q3

问题：自己配置的视图映射、拦截器没有用到

原因：MyMvcConfig 没有加 @Configuration注解

## Q4

问题：thymeleaf无法获取session、model的值

解决：<https://blog.csdn.net/qq_35145357/article/details/79273000>

<https://www.cnblogs.com/ynhwl/p/10016957.html>

~~~html
 <div th:text="${session.loginUser}">[...]</div> 
<div th:text="${session.login.name}">[...]</div> //session对象中的某一个属性值
~~~

## Q5

问题：mybatis自动生成的pojo类中的属性与数据库中的属性大小写不符

解决：blog.csdn.net/li627528647/article/details/77915661

将resultType   换成  resultMap，然后里面的值为自动生成的resultMap的id值；

~~~xml
  <select id="showSowingDateInformation" parameterType="String" resultMap="BaseResultMap">
    select * from t_sowingdate where name like "%"#{name}"%"
  </select>
~~~

## Q6

问题：mybatis自动生成的pojo类中的属性与数据库中的属性大小写不符

解决：将mysql数据表中的字段名改为xxx_id（mysql数据库不区分大小写）

## Q7

问题：springboot无法显示上传的文件(文件路径映射)

解决： 显示的路径要加项目名

~~~java
//1.配置  
@Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/Img/**")
                .addResourceLocations("file:E:/imgs/image_ssm/");
        WebMvcConfigurer.super.addResourceHandlers(registry);
    }
~~~

~~~html
  <el-table-column prop="photo" label="图片">
            <!-- 图片的显示 -->
            <template scope="scope">
                <img :src="imgUrl+scope.row.photo" alt="" min-width="60" height="60">
            </template>
        </el-table-column>


 imgUrl:'http://localhost:8080/znsc/Img/',
~~~

## Q8

问题：在修改功能中，thymeleaf不能在js初始化

解决：将修改重新放入一个新的页面，这些后台的值就可以通过thymeleaf获取，赋值给vue的初始值

​		这个问题是，刚开始并没有得到修改的后台属性，所以vue的初始值都为空。因此报错。

## Q9

问题：SeedlingSatge declares multiple JSON fields named xxx解决方法

解决办法：SeedlingSatge 继承了MaturePeriod，导致子类和父类存在重复字段

## Q10

问题：后端拿不到前端的值，也不报错

解决：前端传过来的值有一个 时间的属性；要规定传过来的 时间格式

​		@DateTimeFormat(pattern ="yyyy-MM-dd HH:mm:ss")

## Q11

问题： There is no getter for property named 'vegetablePlantings' in 'class com.hc.znsc.model.Greenhouse'

解决：多表连接；某个表想要用到其他表的数据

必须在这个表中映射 其它表

例如：

```
//加了这句才能在Greenhouse 里面映射 VegetablePlanting
private VegetablePlanting vegetablePlantings;
```